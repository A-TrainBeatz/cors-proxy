<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Warp Hotspot Proxy Browser</title>
<style>
body{margin:0;padding:0;font-family:sans-serif;background:#0f1020;color:white;display:flex;flex-direction:column;align-items:center;}
#controls{width:100%;display:flex;flex-wrap:wrap;gap:.5rem;padding:.5rem;background:#121224;}
input,select,button{padding:.5rem;border-radius:6px;border:none;font-size:1rem;}
input,select{flex:1;min-width:180px;}
button{background:#ff6fb3;color:white;cursor:pointer;}
iframe{width:100vw;height:calc(100vh - 3.5rem);border:none;background:white;}
</style>
</head>
<body>

<div id="controls">
  <input id="urlInput" placeholder="https://example.com">
  <button onclick="go()">Go</button>
  <select id="carrierProfile" onchange="changeProfile()">
    <option value="iphone">iPhone LTE</option>
    <option value="android">Android 13</option>
    <option value="desktop">Desktop Chrome</option>
  </select>
</div>

<iframe id="frame" sandbox="allow-scripts allow-forms allow-same-origin"></iframe>

<script>
const BACKEND = '/proxy?url='; // relative path to backend
let carrierProfile = 'iphone';

// Register Service Worker
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('/sw.js')
    .then(()=>console.log('SW registered'))
    .catch(console.error);
}

// Load URL in iframe
function go(){
  const url = document.getElementById('urlInput').value.trim();
  if(!url) return;
  loadUrl(url);
}

function loadUrl(url){
  if(!url.startsWith('http')) url='https://'+url;
  const iframe=document.getElementById('frame');
  iframe.src=BACKEND+encodeURIComponent(url)+'&profile='+carrierProfile;
}

function changeProfile(){
  carrierProfile=document.getElementById('carrierProfile').value;
  const iframe=document.getElementById('frame');
  if(iframe.src) iframe.src=iframe.src.split('&profile=')[0]+'&profile='+carrierProfile;
}

// Enter key support
document.getElementById('urlInput').addEventListener('keydown',e=>{
  if(e.key==='Enter') go();
});
</script>

</body>
</html>

